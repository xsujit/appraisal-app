<!doctype html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security" 
	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="~{layout/layout}" lang="en">
<head>
    <title>View your appraisal</title>
<script src="https://code.highcharts.com/highcharts.js"></script>

<script>

$(function () {
	var employees = [[${fullYearResultMap.keySet()}]];
	var midYearVotes = [[${midYearResultMap.values()}]];
	var fullYearVotes = [[${fullYearResultMap.values()}]];
    var myChart = Highcharts.chart('votesChart', {
        chart: {
        	height: (9 / 16 * 100) + '%',
            type: 'bar'
        },
        title: {
            text: 'Vote Distribution'
        },
        xAxis: {
            categories: employees
        },
        yAxis: {
        	allowDecimals: false,
            title: {
                text: 'Votes received'
            }
        },
        series: [{
            name: 'Appraisal 2018 Mid Year',
            data: midYearVotes
        },{
            name: 'Appraisal 2018 Full Year',
            data: fullYearVotes
        }]
    });
});

</script>
</head>
<body>
<nav layout:fragment="navibar" th:replace="fragments/navigation.html :: navibar(activeLink='Result')"></nav>
	<main role="main" class="container" layout:fragment="content">
	
		<div id="votesChart"></div>

		 <div class="m-3 font-italic">
		 	<a th:href="@{/result}" class="alert-link">Click here</a> to view current appraisal result.
		 </div>
	</main> <!-- /.container -->
</body>
</html>

